{"ast":null,"code":"var _jsxFileName = \"D:\\\\DSI32\\\\ProjetChef\\\\platform_univercity\\\\NextGen-Project\\\\frontend\\\\src\\\\pages\\\\Register.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:4000/api/auth';\nexport default function Register() {\n  _s();\n  const [form, setForm] = useState({\n    first_name: '',\n    last_name: '',\n    email: '',\n    password: '',\n    role: 'student'\n  });\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const submit = async e => {\n    e.preventDefault();\n    setError(null);\n    try {\n      const res = await axios.post(`${API_BASE}/register`, form);\n      setSuccess('Registered. You are logged in.');\n      console.log(res.data);\n    } catch (err) {\n      var _err$response, _err$response2;\n      console.error('Registration error', err);\n      console.error('Response data', (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data);\n      // express-validator returns { errors: [ { msg, param, ... } ] }\n      const data = (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data;\n      if (data !== null && data !== void 0 && data.errors && Array.isArray(data.errors)) {\n        setError(data.errors.map(e => `${e.param}: ${e.msg}`).join('; '));\n      } else if (data !== null && data !== void 0 && data.message) {\n        setError(data.message);\n      } else {\n        setError('Registration failed');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'green'\n      },\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"First name\",\n        value: form.first_name,\n        onChange: e => setForm({\n          ...form,\n          first_name: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Last name\",\n        value: form.last_name,\n        onChange: e => setForm({\n          ...form,\n          last_name: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Email\",\n        value: form.email,\n        onChange: e => setForm({\n          ...form,\n          email: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Password\",\n        type: \"password\",\n        value: form.password,\n        onChange: e => setForm({\n          ...form,\n          password: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: form.role,\n        onChange: e => setForm({\n          ...form,\n          role: e.target.value\n        }),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"student\",\n          children: \"Student\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"teacher\",\n          children: \"Teacher\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"admin\",\n          children: \"Admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"director\",\n          children: \"Director\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n}\n_s(Register, \"LRLqZ8qO/drK2ZZYFylpNpl8Row=\");\n_c = Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","API_BASE","process","env","REACT_APP_API_BASE","Register","_s","form","setForm","first_name","last_name","email","password","role","error","setError","success","setSuccess","submit","e","preventDefault","res","post","console","log","data","err","_err$response","_err$response2","response","errors","Array","isArray","map","param","msg","join","message","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","onSubmit","placeholder","value","onChange","target","type","_c","$RefreshReg$"],"sources":["D:/DSI32/ProjetChef/platform_univercity/NextGen-Project/frontend/src/pages/Register.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:4000/api/auth';\r\n\r\nexport default function Register() {\r\n  const [form, setForm] = useState({ first_name: '', last_name: '', email: '', password: '', role: 'student' });\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    try {\r\n      const res = await axios.post(`${API_BASE}/register`, form);\r\n      setSuccess('Registered. You are logged in.');\r\n      console.log(res.data);\r\n    } catch (err) {\r\n      console.error('Registration error', err);\r\n      console.error('Response data', err.response?.data);\r\n      // express-validator returns { errors: [ { msg, param, ... } ] }\r\n      const data = err.response?.data;\r\n      if (data?.errors && Array.isArray(data.errors)) {\r\n        setError(data.errors.map(e => `${e.param}: ${e.msg}`).join('; '));\r\n      } else if (data?.message) {\r\n        setError(data.message);\r\n      } else {\r\n        setError('Registration failed');\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Register</h2>\r\n      {error && <div style={{ color: 'red' }}>{error}</div>}\r\n      {success && <div style={{ color: 'green' }}>{success}</div>}\r\n      <form onSubmit={submit}>\r\n        <input placeholder=\"First name\" value={form.first_name} onChange={e => setForm({ ...form, first_name: e.target.value })} />\r\n        <input placeholder=\"Last name\" value={form.last_name} onChange={e => setForm({ ...form, last_name: e.target.value })} />\r\n        <input placeholder=\"Email\" value={form.email} onChange={e => setForm({ ...form, email: e.target.value })} />\r\n        <input placeholder=\"Password\" type=\"password\" value={form.password} onChange={e => setForm({ ...form, password: e.target.value })} />\r\n        <select value={form.role} onChange={e => setForm({ ...form, role: e.target.value })}>\r\n          <option value=\"student\">Student</option>\r\n          <option value=\"teacher\">Teacher</option>\r\n          <option value=\"admin\">Admin</option>\r\n          <option value=\"director\">Director</option>\r\n        </select>\r\n        <button type=\"submit\">Register</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}